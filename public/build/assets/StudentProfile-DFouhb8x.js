import{r as j,u as L,j as e,H as C,L as D,a as g}from"./app-drMYg6w5.js";import{A as E}from"./AppLayout-DkSna3jR.js";/* empty css            */function F({student:r,universities:u,flash:x}){const[v,m]=j.useState(!1),[N,h]=j.useState(!1),{data:s,setData:t,put:_,processing:f,errors:U}=L({name:r.name,department:r.department,stage:r.stage,gpa:r.gpa||"",university_id:r.university_id,date:r.date?r.date.split("T")[0]:"",mobile:r.mobile,code:r.code,profile_image:null,installment_total:r.installment_total,installment_received:r.installment_received,installment_remaining:r.installment_remaining,fees_total:r.fees_total,fees_received:r.fees_received,fees_remaining:r.fees_remaining,sender_agent:r.sender_agent||"",sender_agent_fees:r.sender_agent_fees,receiver_agent:r.receiver_agent||"",receiver_agent_fees:r.receiver_agent_fees,documents:[]}),w=a=>{if(a.preventDefault(),!s.profile_image&&(!s.documents||s.documents.length===0)){const o={...s};delete o.profile_image,delete o.documents,_(`/admin/students/${r.id}`,o,{onSuccess:()=>{m(!1)}})}else{const o=new FormData;Object.keys(s).forEach(l=>{l==="documents"&&s[l]?.length>0?s[l].forEach((c,i)=>{o.append(`documents[${i}]`,c)}):l==="profile_image"&&s[l]?o.append("profile_image",s[l]):l!=="documents"&&l!=="profile_image"&&o.append(l,s[l]||"")}),o.append("_method","PUT"),g.post(`/admin/students/${r.id}`,o,{onSuccess:()=>{m(!1)}})}},$=()=>{g.delete(`/admin/students/${r.id}`,{onSuccess:()=>{g.visit("/admin/students")}})},k=async()=>{const a=`🎓 *ملف الطالب الشامل*

👤 *الطالب:* ${r.name}
🆔 *الرقم الجامعي:* ${r.code}
�️ *الجامعة:* ${r.university?.name||"غير محدد"}
📚 *القسم:* ${r.department}
� *المرحلة:* ${r.stage}
📱 *الهاتف:* ${r.mobile}
${r.gpa?`📊 *المعدل:* ${r.gpa}%`:""}

━━━━━━━━━━━━━━━━━━━━━━━

💰 *المعلومات المالية:*

💳 *الأقساط:*
• المبلغ الكامل: ${r.installment_total?.toLocaleString()||0} د.ع
• المبلغ المدفوع: ${r.installment_received?.toLocaleString()||0} د.ع ✅
• المبلغ المتبقي: ${(r.installment_remaining||r.installment_total-r.installment_received)?.toLocaleString()||0} د.ع ⏳

🏦 *الأجور:*
• الأجور الكاملة: ${r.fees_total?.toLocaleString()||0} د.ع
• الأجور المدفوعة: ${r.fees_received?.toLocaleString()||0} د.ع ✅
• الأجور المتبقية: ${(r.fees_remaining||r.fees_total-r.fees_received)?.toLocaleString()||0} د.ع ⏳

${r.sender_agent?`🤝 *المعقب المرسل:* ${r.sender_agent}
💵 *أجوره:* ${r.sender_agent_fees?.toLocaleString()||0} د.ع`:""}

${r.receiver_agent?`🤝 *المعقب المستلم:* ${r.receiver_agent}
💵 *أجوره:* ${r.receiver_agent_fees?.toLocaleString()||0} د.ع`:""}

━━━━━━━━━━━━━━━━━━━━━━━

📄 *المرفقات:*
• ملف PDF شامل ومفصل مع جميع البيانات
• ${r.documents?.length||0} مستند إضافي

🏛️ *وزارة التعليم العالي والبحث العلمي*
🇮🇶 *جمهورية العراق*`,o=`https://api.whatsapp.com/send?text=${encodeURIComponent(a)}`;if(window.open(o,"_blank"),r.application&&r.application.application_number&&r.application.status==="accepted")window.open(`/application/${r.application.application_number}/acceptance-pdf`,"_blank");else try{const l=await axios.get(`/student/${r.id}/pdf`,{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([l.data])),i=document.createElement("a");i.href=c,i.setAttribute("download",`${r.name}_${r.code}.pdf`),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(c)}catch(l){console.error("Error downloading PDF:",l)}},S=async()=>{if(r.application&&r.application.status==="accepted"){const l=document.createElement("a");l.href=`/application/${r.application.application_number}/acceptance-pdf`,l.target="_blank",l.click()}else try{const l=await axios.get(`/student/${r.id}/pdf`,{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([l.data])),i=document.createElement("a");i.href=c,i.setAttribute("download",`${r.name}_${r.code}.pdf`),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(c)}catch(l){console.error("Error downloading PDF:",l)}const a=`🎓 **ملف الطالب الشامل**

👤 **الطالب:** ${r.name}
🆔 **الرقم الجامعي:** ${r.code}
�️ **الجامعة:** ${r.university?.name||"غير محدد"}
📚 **القسم:** ${r.department}
� **المرحلة:** ${r.stage}
📱 **الهاتف:** ${r.mobile}
${r.gpa?`📊 **المعدل:** ${r.gpa}%`:""}

━━━━━━━━━━━━━━━━━━━━━━━

💰 **المعلومات المالية:**

💳 **الأقساط:**
• المبلغ الكامل: ${r.installment_total?.toLocaleString()||0} د.ع
• المبلغ المدفوع: ${r.installment_received?.toLocaleString()||0} د.ع ✅
• المبلغ المتبقي: ${(r.installment_remaining||r.installment_total-r.installment_received)?.toLocaleString()||0} د.ع ⏳

🏦 **الأجور:**
• الأجور الكاملة: ${r.fees_total?.toLocaleString()||0} د.ع
• الأجور المدفوعة: ${r.fees_received?.toLocaleString()||0} د.ع ✅
• الأجور المتبقية: ${(r.fees_remaining||r.fees_total-r.fees_received)?.toLocaleString()||0} د.ع ⏳

${r.sender_agent?`🤝 **المعقب المرسل:** ${r.sender_agent}
💵 **أجوره:** ${r.sender_agent_fees?.toLocaleString()||0} د.ع`:""}

${r.receiver_agent?`🤝 **المعقب المستلم:** ${r.receiver_agent}
💵 **أجوره:** ${r.receiver_agent_fees?.toLocaleString()||0} د.ع`:""}

━━━━━━━━━━━━━━━━━━━━━━━

📄 **المرفقات:**
• ملف PDF شامل ومفصل مع جميع البيانات
• ${r.documents?.length||0} مستند إضافي

🏛️ **وزارة التعليم العالي والبحث العلمي**
🇮🇶 **جمهورية العراق**`,o=`https://t.me/share/url?url=${encodeURIComponent("")}&text=${encodeURIComponent(a)}`;window.open(o,"_blank")},b=r.installment_total>0?Math.round(r.installment_received/r.installment_total*100):0;let p="text-red-600",y="معلق";b>=100?(p="text-green-600",y="مكتمل"):b>=50&&(p="text-yellow-600",y="جزئي");let n="text-gray-600",d="لا يوجد طلب";if(r.application)switch(r.application.status){case"pending":n="text-yellow-600",d="معلق";break;case"approved":n="text-blue-600",d="مقبول";break;case"accepted":n="text-green-600",d="قبول نهائي";break;case"rejected":n="text-red-600",d="مرفوض";break;default:n="text-gray-600",d="غير محدد"}return e.jsxs(E,{children:[e.jsx(C,{title:`ملف الطالب - ${r.name}`}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b-2 border-gray-400",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{href:"/admin/students",className:"text-blue-600 hover:text-blue-800 text-sm border border-blue-600 px-3 py-1 hover:bg-blue-50",children:"← العودة للقائمة"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ملف الطالب"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"وزارة التعليم العالي والبحث العلمي"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>k(),className:"px-3 py-2 bg-green-600 text-white text-sm border border-green-600 hover:bg-green-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"إرسال واتساب"]}),e.jsxs("button",{onClick:()=>S(),className:"px-3 py-2 bg-blue-500 text-white text-sm border border-blue-500 hover:bg-blue-600 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"إرسال تلجرام"]}),e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white text-sm border border-blue-600 hover:bg-blue-700",children:"تعديل البيانات"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-red-600 text-white text-sm border border-red-600 hover:bg-red-700",children:"حذف الطالب"})]})]})})}),e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white border border-gray-400",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-4 py-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"البيانات الشخصية"})}),e.jsx("div",{className:"p-4",children:e.jsx("table",{className:"w-full border border-gray-400",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700 w-1/3",children:"الاسم الكامل"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:r.name})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"الرقم الجامعي"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:r.code})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"القسم"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:r.department})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"الجامعة"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:[r.university?.name,r.university?.location&&e.jsx("div",{className:"text-sm text-gray-500",children:r.university.location})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"المرحلة الدراسية"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:r.stage})]}),r.gpa&&e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"المعدل التراكمي"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-bold",children:r.gpa})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"رقم الهاتف"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:r.mobile})]}),r.date&&e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"تاريخ التسجيل"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:new Date(r.date).toLocaleDateString("ar-EG")})]})]})})})]}),e.jsxs("div",{className:"bg-white border border-gray-400 mt-6",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-4 py-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"المعلومات المالية"})}),e.jsx("div",{className:"p-4",children:e.jsx("table",{className:"w-full border border-gray-400",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700 w-1/3",children:"حالة الطلب"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2",children:[e.jsx("span",{className:`${n} font-bold`,children:d}),r.application&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 space-y-1",children:[r.application.application_number&&e.jsxs("div",{children:["رقم الطلب: ",r.application.application_number]}),r.application.status==="accepted"&&r.application.accepted_at&&e.jsxs("div",{children:["تاريخ القبول النهائي: ",new Date(r.application.accepted_at).toLocaleDateString("ar-EG")]}),r.application.status==="approved"&&r.application.reviewed_at&&e.jsxs("div",{children:["تاريخ المراجعة: ",new Date(r.application.reviewed_at).toLocaleDateString("ar-EG")]})]})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700 w-1/3",children:"حالة الدفع"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2",children:e.jsxs("span",{className:`${p} font-bold`,children:[y," (",b,"%)"]})})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"border border-gray-400 px-3 py-2 bg-blue-50 font-bold text-blue-800 text-center",children:"الأقساط"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"القسط"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:[r.installment_total?.toLocaleString()," د.ع"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"واصل القسط"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-green-600 font-mono font-bold",children:[r.installment_received?.toLocaleString()," د.ع"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"باقي القسط"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-red-600 font-mono font-bold",children:[r.installment_remaining?.toLocaleString()||(r.installment_total-r.installment_received).toLocaleString()," د.ع"]})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"border border-gray-400 px-3 py-2 bg-green-50 font-bold text-green-800 text-center",children:"الأجور"})}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"الأجور"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:[r.fees_total?.toLocaleString()," د.ع"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"واصل الأجور"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-green-600 font-mono font-bold",children:[r.fees_received?.toLocaleString()," د.ع"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"باقي الأجور"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-red-600 font-mono font-bold",children:[r.fees_remaining?.toLocaleString()||(r.fees_total-r.fees_received).toLocaleString()," د.ع"]})]}),(r.sender_agent||r.receiver_agent)&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"border border-gray-400 px-3 py-2 bg-yellow-50 font-bold text-yellow-800 text-center",children:"المعقبين"})}),r.sender_agent&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"المعقب المرسل"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:r.sender_agent})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"أجور المعقب المرسل"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:[r.sender_agent_fees?.toLocaleString()," د.ع"]})]})]}),r.receiver_agent&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"المعقب المستلم"}),e.jsx("td",{className:"border border-gray-400 px-3 py-2 text-gray-900",children:r.receiver_agent})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-3 py-2 bg-gray-50 font-medium text-gray-700",children:"أجور المعقب المستلم"}),e.jsxs("td",{className:"border border-gray-400 px-3 py-2 text-gray-900 font-mono",children:[r.receiver_agent_fees?.toLocaleString()," د.ع"]})]})]})]})]})})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white border border-gray-400",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-4 py-2",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"الصورة الشخصية"})}),e.jsxs("div",{className:"p-4 text-center",children:[r.profile_image?e.jsx("img",{className:"w-32 h-32 border-2 border-gray-300 mx-auto mb-4 rounded-lg object-cover shadow-sm",src:`/storage/${r.profile_image}`,alt:r.name,onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-32 h-32 border-2 border-gray-300 bg-gray-100 mx-auto mb-4 flex items-center justify-center rounded-lg",children:e.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("div",{className:`inline-block px-3 py-1 border ${n==="text-green-600"?"border-green-600 bg-green-50":n==="text-blue-600"?"border-blue-600 bg-blue-50":n==="text-yellow-600"?"border-yellow-600 bg-yellow-50":n==="text-red-600"?"border-red-600 bg-red-50":"border-gray-600 bg-gray-50"} text-sm font-medium`,children:d})]})]}),r.documents&&r.documents.length>0&&e.jsxs("div",{className:"bg-white border border-gray-400 mt-6",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-4 py-2",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["المستندات (",r.documents.length,")"]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:r.documents.map((a,o)=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-300 p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.file_name}),e.jsx("div",{className:"text-xs text-gray-500",children:a.file_size&&`${(a.file_size/1024/1024).toFixed(2)} ميجابايت`})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("a",{href:`/admin/students/documents/${a.id}/download`,className:"px-3 py-1 bg-blue-600 text-white text-xs hover:bg-blue-700 transition-colors duration-200",children:"تحميل"}),e.jsx("button",{onClick:()=>{confirm("هل تريد حذف هذا المستند؟")&&g.delete(`/admin/students/documents/${a.id}`)},className:"px-3 py-1 bg-red-600 text-white text-xs hover:bg-red-700 transition-colors duration-200",children:"حذف"})]})]},o))})})]})]})]})})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white border-2 border-gray-400 w-full max-w-4xl max-h-screen overflow-y-auto m-4",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"تعديل بيانات الطالب"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-600 hover:text-gray-800 text-xl font-bold",children:"×"})]})}),e.jsxs("form",{onSubmit:w,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"البيانات الشخصية"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الطالب *"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>t("name",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف *"}),e.jsx("input",{type:"text",value:s.mobile,onChange:a=>t("mobile",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التاريخ"}),e.jsx("input",{type:"date",value:s.date,onChange:a=>t("date",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"البيانات الأكاديمية"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الكود *"}),e.jsx("input",{type:"text",value:s.code,onChange:a=>t("code",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"القسم *"}),e.jsx("input",{type:"text",value:s.department,onChange:a=>t("department",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المرحلة"}),e.jsxs("select",{value:s.stage,onChange:a=>t("stage",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",children:[e.jsx("option",{value:"بكالوريوس",children:"بكالوريوس"}),e.jsx("option",{value:"ماجستير",children:"ماجستير"}),e.jsx("option",{value:"دكتوراه",children:"دكتوراه"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الجامعة *"}),e.jsxs("select",{value:s.university_id,onChange:a=>t("university_id",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"اختر الجامعة"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المعدل"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:s.gpa,onChange:a=>t("gpa",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"القسط"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"القسط"}),e.jsx("input",{type:"number",value:s.installment_total,onChange:a=>t("installment_total",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"واصل القسط"}),e.jsx("input",{type:"number",value:s.installment_received,onChange:a=>t("installment_received",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"باقي القسط"}),e.jsx("input",{type:"number",value:s.installment_remaining,onChange:a=>t("installment_remaining",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"الأجور"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأجور"}),e.jsx("input",{type:"number",value:s.fees_total,onChange:a=>t("fees_total",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"واصل الأجور"}),e.jsx("input",{type:"number",value:s.fees_received,onChange:a=>t("fees_received",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"باقي الأجور"}),e.jsx("input",{type:"number",value:s.fees_remaining,onChange:a=>t("fees_remaining",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"بيانات المعقبين"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المعقب المرسل"}),e.jsx("input",{type:"text",value:s.sender_agent,onChange:a=>t("sender_agent",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأجور التي تخص المعقب المرسل"}),e.jsx("input",{type:"number",value:s.sender_agent_fees,onChange:a=>t("sender_agent_fees",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المعقب المستلم"}),e.jsx("input",{type:"text",value:s.receiver_agent,onChange:a=>t("receiver_agent",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأجور التي تخص المعقب المستلم"}),e.jsx("input",{type:"number",value:s.receiver_agent_fees,onChange:a=>t("receiver_agent_fees",a.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 border border-gray-300 px-4 py-2 mb-4",children:e.jsx("h4",{className:"font-bold text-gray-800",children:"الملفات"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تحديث الصورة الشخصية"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>t("profile_image",a.target.files[0]),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إضافة مستندات جديدة"}),e.jsx("input",{type:"file",multiple:!0,onChange:a=>t("documents",Array.from(a.target.files)),className:"w-full px-3 py-2 border-2 border-gray-300 focus:outline-none focus:border-blue-600 text-sm"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t-2 border-gray-300 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-2 border-2 border-gray-400 text-gray-700 hover:bg-gray-100 font-medium transition-colors duration-200",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-700 text-white border-2 border-blue-800 hover:bg-blue-800 font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"جاري الحفظ...":"حفظ التعديلات"})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white border-2 border-gray-400 w-full max-w-md m-4",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-400 px-6 py-3",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"تأكيد الحذف"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["هل أنت متأكد من رغبتك في حذف الطالب ",e.jsx("strong",{children:r.name}),"؟"]}),e.jsx("p",{className:"text-red-600 text-sm mb-6",children:"تحذير: هذا الإجراء لا يمكن التراجع عنه وسيتم حذف جميع البيانات والمستندات المرتبطة بالطالب."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-400 text-gray-700 hover:bg-gray-100",children:"إلغاء"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-red-600 text-white border border-red-600 hover:bg-red-700",children:"حذف الطالب"})]})]})]})}),x?.success&&e.jsx("div",{className:"fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 z-50",children:x.success}),x?.error&&e.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 z-50",children:x.error})]})}export{F as default};
